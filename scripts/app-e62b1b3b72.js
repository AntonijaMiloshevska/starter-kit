/// <reference path="../../typings/tsd.d.ts" />
var app;!function(e){"use strict";angular.module("app",["gettext","ngAnimate","ngSanitize","ui.router","ui.bootstrap"])}(app||(app={}));var app;!function(e){"use strict";angular.module("app").constant("_",_)}(app||(app={}));var app;!function(e){"use strict";function t(e,t,a,n,r,o,i){function s(){n.debug=o.debug,c.setLanguage(),i.setServer(o.server)}function l(e){c.pageTitle=n.getString("APP_NAME"),e&&(c.pageTitle+=" | "+n.getString(e))}var c=t;c.pageTitle="",c.setLanguage=function(t){var a=r.contains(o.supportedLanguages,t);a||(t="en-US"),n.setCurrentLanguage(t),e.id=t},c.$on("$stateChangeSuccess",function(e,t){l(t.data?t.data.title:null)}),c.$on("gettextLanguageChanged",function(){l(a.current.data?a.current.data.title:null)}),s()}t.$inject=["$locale","$rootScope","$state","gettextCatalog","_","config","restService"],angular.module("app").run(t)}(app||(app={}));var app;!function(e){"use strict";function t(e,t,a){t.otherwise("/"),e.state("app",{templateUrl:"modules/shell/shell.html",controller:"shellController as shell"}).state("app.home",{url:"/",templateUrl:"modules/screens/home/home.html",controller:"homeController as vm",data:{title:a("Home")}}).state("app.about",{url:"/about",templateUrl:"modules/screens/about/about.html",controller:"aboutController as vm",data:{title:a("About")}})}t.$inject=["$stateProvider","$urlRouterProvider","gettext"],angular.module("app").config(t)}(app||(app={}));var app;!function(e){"use strict";angular.module("app").constant("config",{debug:!1,version:"1.0.0",supportedLanguages:["en-US","fr-FR"],server:{restServerUrl:"",restUri:"api"}})}(app||(app={}));var app;!function(e){"use strict";function t(e,t){e.decorator("$exceptionHandler",["$delegate","$injector",function(e,t){return function(a,n){e(a,n);var r=t.get("logger").getLogger("exceptionHandler");r.error(a+(n?" ("+n+")":""))}}]),e.decorator("$log",["$delegate",function(e){return t.debug||(e.log=angular.noop,e.debug=angular.noop),e}])}t.$inject=["$provide","config"],angular.module("app").config(t)}(app||(app={}));var app;!function(e){"use strict";var t=function(){function e(e,t,a){this.ROUTES={randomJoke:"/jokes/random?escape=javascript&limitTo=[:category]"},this.$q=e,this.restService=t,this.contextService=a}return e.$inject=["$q","restService","contextService"],e.prototype.getRandomJoke=function(e){var t=this;return this.restService.get(this.contextService.inject(this.ROUTES.randomJoke,e),null,!0).then(function(e){return e.data&&e.data.value?e.data.value.joke:t.$q.reject()})["catch"](function(){return"Error, could not load joke :-("})},e}();e.QuoteService=t,angular.module("app").service("quoteService",t)}(app||(app={}));var app;!function(e){"use strict";var t=function(){function e(){this.restrict="A",this.templateUrl="modules/ui-components/loading/loading.html",this.scope={message:"=",isLoading:"=uiLoading"}}return e}();e.LoadingDirective=t,angular.module("app").directive("uiLoading",function(){return new t})}(app||(app={}));var app;!function(e){"use strict";var t=function(){function e(e,t){this.isLoading=!0,this.quote=null,this.logger=e.getLogger("home"),this.quoteService=t,this.init()}return e.$inject=["logger","quoteService"],e.prototype.init=function(){this.logger.log("init",null);var e=this;this.quoteService.getRandomJoke({category:"nerdy"}).then(function(t){e.quote=t})["finally"](function(){e.isLoading=!1})},e}();e.HomeController=t,angular.module("app").controller("homeController",t)}(app||(app={}));var app;!function(e){"use strict";var t=function(){function e(e,t){this.logger=e.getLogger("about"),this.config=t,this.init()}return e.$inject=["logger","config"],e.prototype.init=function(){this.version=this.config.version,this.logger.log("init",null)},e}();e.AboutController=t,angular.module("app").controller("aboutController",t)}(app||(app={}));var app;!function(e){"use strict";var t=function(){function e(e,t,a,n){this.baseServer=null,this.baseUri="",this.defaultConfig={headers:{"content-type":"application/json","Access-Control-Allow-Headers":"content-type"}},this.cacheHandler=angular.identity,this.$q=e,this.$http=t,this.cacheService=a,this.logger=n.getLogger("restService")}return e.$inject=["$q","$http","cacheService","logger"],e.prototype.get=function(e,t,a,n){var r=this.baseUri+e,o=this,i=function(){return o.$http.get(r,{params:t})};if(a){var s="force"===a?null:this.cacheService.getCacheData(e,t);if(null!==s&&(s=this.cacheHandler(s)),null===s)return this.logger.log("GET request: "+e,null),this.createRequest(i,n).then(function(a){return o.cacheService.setCacheData(e,t,a,null),angular.copy(a)});var l=this.$q.defer();return l.resolve(angular.copy(s)),this.errorHandler(l.promise,n)}return this.createRequest(i,n)},e.prototype.put=function(e,t,a){var n=this;this.logger.log("PUT request: "+e,null);var r=function(){return n.$http.put(n.baseUri+e,t,n.defaultConfig)};return this.createRequest(r,a)},e.prototype.post=function(e,t,a){this.logger.log("POST request: "+e,null);var n=this,r=function(){return n.$http.post(n.baseUri+e,t,n.defaultConfig)};return this.createRequest(r,a)},e.prototype["delete"]=function(e,t){this.logger.log("DELETE request: "+e,null);var a=this,n=function(){return a.$http["delete"](a.baseUri+e,a.defaultConfig)};return this.createRequest(n,t)},e.prototype.setServer=function(e){this.baseServer=e,this.baseUri=e.restServerUrl+e.restUri},e.prototype.getServer=function(){return this.baseServer},e.prototype.getBaseUri=function(){return this.baseUri},e.prototype.setRequestHandler=function(e){this.requestHandler=e},e.prototype.getRequestHandler=function(){return this.requestHandler},e.prototype.setErrorHandler=function(e){this.errorHandler=e},e.prototype.getErrorHandler=function(){return this.errorHandler},e.prototype.setCacheHandler=function(e){this.cacheHandler=e},e.prototype.getCacheHandler=function(){return this.cacheHandler},e.prototype.requestHandler=function(e,t){return e(t)},e.prototype.errorHandler=function(e,t){var a=this;return t&&t.skipErrors||e["catch"](function(e){var t;if(404===e.status)t="Server unavailable or URL does not exist";else if(e.data){var n=e.data.message?e.data.message:null,r=e.data.error?e.data.error:null;t=n||r||angular.toJson(e.data)}return t&&a.logger.error(t,null),a.$q.reject(e)}),e},e.prototype.createRequest=function(e,t){return this.errorHandler(this.requestHandler(e,t),t)},e}();e.RestService=t,angular.module("app").service("restService",t)}(app||(app={}));var app;!function(e){"use strict";function t(e,t,n,r,o){n(t?"["+t+"]":"",e,""),angular.forEach(a,function(a){a(e,t,r,o)})}var a=[],n=function(){function e(e,t,a){this.moduleName=t,this.logFunc=a,this.$log=e}return e.prototype.log=function(e,t){this.logFunc(e,this.moduleName,this.$log.log,"log",t)},e.prototype.info=function(e,t){this.logFunc(e,this.moduleName,this.$log.info,"info",t)},e.prototype.warning=function(e,t){this.logFunc(e,this.moduleName,this.$log.warn,"warning",t)},e.prototype.error=function(e,t){this.logFunc(e,this.moduleName,this.$log.error,"error",t)},e}(),r=function(){function e(e){this.$log=e}return e.$inject=["$log"],e.prototype.getLogger=function(e){return new n(this.$log,e,t)},e.prototype.addObserver=function(e){a.push(e)},e}();e.LoggerService=r,angular.module("app").service("logger",r)}(app||(app={}));var app;!function(e){"use strict";var t=function(){function e(e){this.logger=e.getLogger("contextService")}return e.$inject=["logger"],e.prototype.inject=function(e,t){if(this.logger.log("Injecting context in: "+e),!t)throw"inject: context must be defined";var a=e.match(/(:\w+)/g),n=this;return angular.forEach(a,function(a){var r=a.substring(1),o=t[r];if(void 0===o)throw"inject: context."+r+" expected but undefined";o=encodeURIComponent(o),e=e.replace(a,o),n.logger.log("Injected "+o+" for "+a)}),this.logger.log("Resulting REST API: "+e),e},e}();e.ContextService=t,angular.module("app").service("contextService",t)}(app||(app={}));var app;!function(e){"use strict";var t=function(){function e(e,t){this.cachedData={},this.storage=null,this.$window=e,this.logger=t.getLogger("cacheService"),this.loadCacheData()}return e.$inject=["$window","logger"],e.prototype.setCacheData=function(e,t,a,n){var r=this.getCacheKey(e,t);this.cachedData[r]={date:n||new Date,data:a},this.logger.log('Cache set for key: "'+r+'"',null),this.saveCacheData()},e.prototype.getCacheData=function(e,t){var a=this.getCacheKey(e,t),n=this.cachedData[a];return n?(this.logger.log('Cache hit for key: "'+a+'"',null),n.data):null},e.prototype.getCacheDate=function(e,t){var a=this.getCacheKey(e,t),n=this.cachedData[a];return n?n.date:null},e.prototype.clearCacheData=function(e,t){var a=this.getCacheKey(e,t);this.cachedData[a]=void 0,this.logger.log('Cache cleared for key: "'+a+'"',null),this.saveCacheData()},e.prototype.cleanCache=function(e){var t=this;e?angular.forEach(t.cachedData,function(a,n){e>=a.date&&(t.cachedData[n]=void 0)}):t.cachedData={},t.saveCacheData()},e.prototype.setPersistence=function(e){this.cleanCache(),this.storage="local"===e||"session"===e?this.$window[e+"Storage"]:null,this.loadCacheData()},e.prototype.getCacheKey=function(e,t){return e+(t?angular.toJson(t):"")},e.prototype.saveCacheData=function(){this.storage&&(this.storage.cachedData=angular.toJson(this.cachedData))},e.prototype.loadCacheData=function(){var e=this.storage?this.storage.cachedData:null;this.cachedData=e?angular.fromJson(e):{}},e}();e.CacheService=t,angular.module("app").service("cacheService",t)}(app||(app={}));var app;!function(e){"use strict";var t=function(){function e(e,t,a,n){this.$state=t,this.currentLocale=e,this.logger=a.getLogger("shell"),this.languages=n.supportedLanguages,this.menuHidden=!0,this.init()}return e.$inject=["$locale","$state","logger","config"],e.prototype.toggleMenu=function(){this.menuHidden=!this.menuHidden},e.prototype.stateContains=function(e){return this.$state.current.name===e},e.prototype.init=function(){this.logger.log("init",null)},e}();e.ShellController=t,angular.module("app").controller("shellController",t)}(app||(app={})),angular.module("app").run(["gettextCatalog",function(e){e.setStrings("en-US",{About:"About",APP_NAME:"Starter Kit","Hello world !":"Hello world !",Home:"Home","Toggle navigation":"Toggle navigation",Version:"Version"})}]),angular.module("app").run(["gettextCatalog",function(e){e.setStrings("fr-FR",{About:"A propos",APP_NAME:"Starter Kit","Hello world !":"Bonjour le monde !",Home:"Accueil","Toggle navigation":"Basculer la navigation",Version:"Version"})}]),angular.module("app").run(["$templateCache",function(e){e.put("index.html",'<!doctype html> <html ng-app="app"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <title ng-bind="pageTitle"></title> <meta name="description" content=""> <meta name="viewport" content="width=device-width">          </head> <body>  <div ui-view=""></div>         </body> </html> '),e.put("modules/shell/shell.html",'<section id="shell" class="shell">  <header> <nav class="navbar navbar-static-top navbar-inverse"> <div class="container-fluid"> <div class="navbar-header"> <button type="button" class="navbar-toggle" ng-click="shell.toggleMenu()" aria-expanded="{{!shell.menuHidden}}"> <span class="sr-only" translate="">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="https://github.com/thales-poles-ra/starter-kit/"> <span translate="">APP_NAME</span> </a> </div> <div class="navbar-collapse" uib-collapse="shell.menuHidden"> <ul class="nav navbar-nav"> <li ng-class="{ active: shell.stateContains(\'app.home\') }"> <a class="nav-item text-uppercase" ui-sref="app.home"> <i class="fa fa-home"></i> <span translate="">Home</span> </a> </li> <li ng-class="{ active: shell.stateContains(\'app.about\') }"> <a class="nav-item text-uppercase" ui-sref="app.about"> <i class="fa fa-question-circle"></i> <span translate="">About</span> </a> </li> </ul> <div class="navbar-form navbar-right"> <div class="form-group" uib-dropdown=""> <button type="button" class="btn btn-default" uib-dropdown-toggle="" aria-haspopup="true" aria-expanded="false"> {{shell.currentLocale.id}} <span class="caret"></span> </button> <ul class="dropdown-menu"> <li ng-repeat="language in ::shell.languages"> <a href="" ng-click="setLanguage(language)">{{language}}</a> </li> </ul> </div> </div> </div> </div> </nav> </header>  <div ui-view=""></div> </section> '),e.put("modules/screens/about/about.html",'<section id="about-screen" class="container-fluid"> <div class="jumbotron text-center"> <h1 translate="">APP_NAME</h1> <p> <i class="fa fa-bookmark-o"></i> <span translate="">Version</span> {{vm.version}} </p> </div> </section> '),e.put("modules/screens/home/home.html",'<section id="home-screen" class="home-screen container-fluid"> <div class="jumbotron text-center"> <h1> <img class="logo" src="images/angularjs-logo.png" alt="angularjs logo"> <span translate="">Hello world !</span> </h1> <div ui-loading="vm.isLoading"></div> <p> <em class="quote">{{vm.quote}}</em> </p> </div> </section> '),e.put("modules/ui-components/loading/loading.html",'<div ng-show="isLoading" class="text-center"> <i class="fa fa-cog fa-spin fa-3x"></i> <span>{{message}}</span> </div> '),e.put("libraries/jasmine-jquery/spec/fixtures/fixture_with_checkbox_with_checked.html",'<div id="anchor_01"> <label> <input type="checkbox" id="checked-box" checked=""> This should render properly </label> </div>'),e.put("libraries/jasmine-jquery/spec/fixtures/fixture_with_javascript.html",'<div id="anchor_01"><script src="spec/fixtures/javascripts/jasmine_javascript_click.js"></script><script src="spec/fixtures/javascripts/jasmine_javascript_hover.js"></script></div> '),e.put("libraries/jasmine-jquery/spec/fixtures/fixture_with_javascript_block.html",'<div id="anchor_01"><script type="text/template">{{name}</script></div> '),e.put("libraries/jasmine-jquery/spec/fixtures/real_non_mocked_fixture.html",'<div id="real_non_mocked_fixture"></div>')}]);